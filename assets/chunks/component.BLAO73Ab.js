import{p as f,q as E,C as I,b as m,o as v,K as N,P,a7 as y,aH as B,k}from"./framework.Cp5SOOHc.js";import{_ as L}from"./index.wOpNrTEW.js";const _=/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.([1-9]\d*|0)$/,O="0.0.0",j="0.0.1",p="1.0.0",u="v",C=[{regular:_,padding:""},{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.$/,padding:"0"},{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)$/,padding:".0"},{regular:/^v?([1-9]\d*|0)\.$/,padding:"0.0"},{regular:/^v?([1-9]\d*|0)$/,padding:".0.0"},{regular:/^v?$/,padding:p}],T=[{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.0+$/,fixStr(r){let l=r.split("."),t=l.length-1;return l[t]=l[t].replace(/^0+/,"0"),l.join(".")}},{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.0+[1-9]\d*$/,fixStr(r){let l=r.split("."),t=l.length-1;return l[t]=l[t].replace(/^0+/,""),l.join(".")}},{regular:/^v?([1-9]\d*|0)\.([1-9]\d*|0)\.\d+\.(.*)$/,fixStr(r){return r.split(".").slice(0,3).join(".")}}],A=Object.assign({name:"ElSemverInput"},{__name:"el-semver-input",props:{modelValue:{type:String},preventIllegal:{type:Boolean,default:!0},autoPadding:{type:Boolean,default:!0},prefix:{type:Boolean,default:!0},validRegular:{type:RegExp,default:()=>_},autoPaddingRegularList:{type:Array,default:()=>C}},emits:["update:modelValue","validChange","input"],setup(r,{emit:l}){const t=r,s=l,d=f(t.modelValue),c=f(!0);E(()=>t.modelValue,e=>{d.value=e});const g=(e="")=>e.split(".").some(n=>n!=0)&&t.validRegular.test(e),V=e=>{s("update:modelValue",e),s("input",e)},h=e=>{s("validChange",e),c.value=e},o=({value:e,isValid:n=!0})=>{V(e),h(n)},x=()=>{o({value:t.prefix?u+p:p})},R=(e="")=>{let n=!1;t.preventIllegal&&(e=e.replace(/[^\d.]/g,function($){return $==u&&e.startsWith(u)&&!n?(n=!0,u):""}));let i=t.prefix&&e.length>0&&!e.startsWith(u)?u+e:e,a=g(i);P(()=>{o({value:i,isValid:a})})},S=()=>{let e=d.value||"",n=t.autoPaddingRegularList.find(a=>a.regular.test(e));if(t.autoPadding&&n){let a=e+n.padding;a=a.replace(O,j),a=t.prefix&&!a.startsWith(u)?u+a:a,o({value:a});return}let i=T.find(a=>a.regular.test(e));if(i){let a=i.fixStr(e);o({value:a});return}g(e)||x()};return(e,n)=>{const i=I("el-input");return v(),m(i,N(e.$attrs,{"model-value":d.value,class:["semver-input",{"is-error":!c.value}],onInput:R,onBlur:S}),null,16,["model-value","class"])}}}),W={__name:"component",setup(r){const l=y([{id:"id",component:B(A),on:{"update:modelValue":t=>{console.log(t)}}}]);return(t,s)=>(v(),m(k(L),{content:l,inline:""},null,8,["content"]))}};export{W as _};
